import{_ as V,h as k,o as x,k as F,b as r,c as l,d as e,t as c,u as i,l as g,v as U,m as f,F as p,r as y,i as j,p as z,q as B,s as O,x as E,j as M}from"./index-D76P8q1G.js";import{P as R}from"./ProductCard-BaR_cSVT.js";const D={class:"section"},L={class:"container"},N={class:"catalog-head"},P={class:"pill"},$={class:"catalog-layout"},I={class:"filters card"},K={class:"filter-group"},Q={class:"filter-group"},T=["value"],A={class:"filter-group"},G=["value"],H=["for"],J=["id","onUpdate:modelValue"],W=["value"],X={key:0,class:"notice"},Y={key:1,class:"product-grid"},Z={key:2,class:"empty card"},tt={__name:"CatalogView",setup(et){const a=k(),n=O(),h=E(),o=z({category:"",query:"",sort:"new",type:"",brand:"",color:"",shape:"",size:"",hardness:""}),q={type:"Тип",brand:"Бренд",color:"Цвет",shape:"Форма",size:"Размер",hardness:"Твердость"},S=[{value:"new",label:"Сначала новые"},{value:"popular",label:"По популярности"},{value:"price_asc",label:"Цена по возрастанию"},{value:"price_desc",label:"Цена по убыванию"}],w=B(()=>Object.keys(a.catalog.filters||{}));function v(){o.category=String(n.query.category||""),o.query=String(n.query.query||""),o.sort=String(n.query.sort||"new"),o.type=String(n.query.type||""),o.brand=String(n.query.brand||""),o.color=String(n.query.color||""),o.shape=String(n.query.shape||""),o.size=String(n.query.size||""),o.hardness=String(n.query.hardness||"")}function b(){const u={};return Object.entries(o).forEach(([s,t])=>{t&&(u[s]=t)}),u}async function _(){await a.fetchCatalog(b())}function m(){h.replace({name:"catalog",query:b()})}function C(){Object.keys(o).forEach(u=>{o[u]=u==="sort"?"new":""}),m()}return x(async()=>{await a.fetchCategories(),v(),await _()}),F(()=>n.query,async()=>{v(),await _()}),(u,s)=>(r(),l("section",D,[e("div",L,[e("div",N,[s[3]||(s[3]=e("div",null,[e("h1",{class:"title"},"Каталог художественных материалов"),e("p",{class:"subtitle"},"Точные фильтры по категориям, брендам и свойствам материалов.")],-1)),e("span",P,"Найдено: "+c(i(a).catalog.count),1)]),e("div",$,[e("aside",I,[e("div",{class:"filters-top"},[s[4]||(s[4]=e("h2",null,"Фильтры",-1)),e("button",{type:"button",class:"btn btn-soft",onClick:C},"Сбросить")]),e("div",K,[s[5]||(s[5]=e("label",{for:"search"},"Поиск",-1)),g(e("input",{id:"search","onUpdate:modelValue":s[0]||(s[0]=t=>o.query=t),class:"input",type:"text",placeholder:"Название, бренд, цвет"},null,512),[[U,o.query]])]),e("div",Q,[s[7]||(s[7]=e("label",{for:"category"},"Категория",-1)),g(e("select",{id:"category","onUpdate:modelValue":s[1]||(s[1]=t=>o.category=t),class:"select"},[s[6]||(s[6]=e("option",{value:""},"Все категории",-1)),(r(!0),l(p,null,y(i(a).categories,t=>(r(),l("option",{key:t.slug,value:t.slug},c(t.name),9,T))),128))],512),[[f,o.category]])]),e("div",A,[s[8]||(s[8]=e("label",{for:"sort"},"Сортировка",-1)),g(e("select",{id:"sort","onUpdate:modelValue":s[2]||(s[2]=t=>o.sort=t),class:"select"},[(r(),l(p,null,y(S,t=>e("option",{key:t.value,value:t.value},c(t.label),9,G)),64))],512),[[f,o.sort]])]),(r(!0),l(p,null,y(w.value,t=>(r(),l("div",{class:"filter-group",key:t},[e("label",{for:t},c(q[t]||t),9,H),g(e("select",{id:t,"onUpdate:modelValue":d=>o[t]=d,class:"select"},[s[9]||(s[9]=e("option",{value:""},"Все",-1)),(r(!0),l(p,null,y(i(a).catalog.filters[t],d=>(r(),l("option",{key:`${t}-${d}`,value:d},c(d),9,W))),128))],8,J),[[f,o[t]]])]))),128)),e("button",{class:"btn btn-primary",type:"button",onClick:m},"Применить фильтры")]),e("div",null,[i(a).error?(r(),l("p",X,c(i(a).error),1)):j("",!0),i(a).catalog.items.length?(r(),l("div",Y,[(r(!0),l(p,null,y(i(a).catalog.items,t=>(r(),M(R,{key:t.id,product:t},null,8,["product"]))),128))])):(r(),l("div",Z,[...s[10]||(s[10]=[e("h3",null,"Ничего не найдено",-1),e("p",null,"Попробуйте изменить фильтры или снять часть ограничений.",-1)])]))])])])]))}},rt=V(tt,[["__scopeId","data-v-ddab81e5"]]);export{rt as default};
