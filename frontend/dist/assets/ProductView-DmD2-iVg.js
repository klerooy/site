import{_ as R,h as S,o as B,k as L,b as o,c as n,d as t,f,w as y,u as v,R as b,F as i,r as u,t as l,i as p,l as N,v as T,q as k,e as x,s as q,g as C,n as I,j as U}from"./index-D76P8q1G.js";import{P as j}from"./ProductCard-BaR_cSVT.js";const D={key:0,class:"section"},E={class:"container"},F={class:"product-layout"},M={class:"gallery card"},z=["src","alt"],O={class:"thumbs"},$=["onClick"],A=["src","alt"],G={class:"product-info card"},H={class:"pill"},J={class:"title"},K={class:"subtitle"},Q={class:"price-row"},W={class:"price"},X={key:0,class:"price-old"},Y={class:"details-list"},Z={class:"actions"},tt={key:0,class:"notice"},st={class:"product-extra"},et={class:"card spec-card"},at={class:"spec-grid"},ot={class:"card review-card"},lt={class:"reviews"},nt={class:"section-tight"},ct={class:"related-head"},rt={class:"related-grid"},it={__name:"ProductView",setup(ut){const r=S(),h=q(),d=x(1),_=x(""),e=k(()=>r.currentProduct),w=k(()=>{var c;return Object.entries(((c=e.value)==null?void 0:c.technical)||{})});async function m(){var c,a;await r.fetchProduct(h.params.id),d.value=1,_.value=((a=(c=e.value)==null?void 0:c.images)==null?void 0:a[0])||""}function P(c){_.value=c}function V(){e.value&&r.addToCart(e.value.id,d.value)}return B(m),L(()=>h.params.id,()=>{m()}),(c,a)=>e.value?(o(),n("section",D,[t("div",E,[f(v(b),{class:"pill",to:"/catalog"},{default:y(()=>[...a[1]||(a[1]=[C("← Назад в каталог",-1)])]),_:1}),t("div",F,[t("div",M,[t("img",{src:_.value||e.value.images[0],alt:e.value.name,class:"main-image"},null,8,z),t("div",O,[(o(!0),n(i,null,u(e.value.images,s=>(o(),n("button",{key:s,type:"button",class:I(["thumb",{active:(_.value||e.value.images[0])===s}]),onClick:g=>P(s)},[t("img",{src:s,alt:e.value.name},null,8,A)],10,$))),128))])]),t("div",G,[t("span",H,l(e.value.brand),1),t("h1",J,l(e.value.name),1),t("p",K,l(e.value.description),1),t("div",Q,[t("span",W,l(e.value.price.toLocaleString("ru-RU"))+" ₽",1),e.value.old_price?(o(),n("span",X,l(e.value.old_price.toLocaleString("ru-RU"))+" ₽",1)):p("",!0)]),t("ul",Y,[(o(!0),n(i,null,u(e.value.details,s=>(o(),n("li",{key:s},l(s),1))),128))]),t("div",Z,[N(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>d.value=s),class:"input qty",type:"number",min:"1",max:"20"},null,512),[[T,d.value,void 0,{number:!0}]]),t("button",{class:"btn btn-primary",type:"button",onClick:V},"Добавить в корзину")]),v(r).error?(o(),n("p",tt,l(v(r).error),1)):p("",!0)])]),t("div",st,[t("article",et,[a[2]||(a[2]=t("h2",null,"Технические детали",-1)),t("div",at,[(o(!0),n(i,null,u(w.value,([s,g])=>(o(),n("div",{key:s},[t("dt",null,l(s),1),t("dd",null,l(g),1)]))),128))])]),t("article",ot,[a[3]||(a[3]=t("h2",null,"Отзывы покупателей",-1)),t("div",lt,[(o(!0),n(i,null,u(e.value.reviews,s=>(o(),n("div",{key:s.author+s.date,class:"review-item"},[t("strong",null,l(s.author),1),t("small",null,l(s.date)+" · "+l(s.rating)+"/5",1),t("p",null,l(s.text),1)]))),128))])])]),t("section",nt,[t("div",ct,[a[5]||(a[5]=t("h2",{class:"title"},"Сопутствующие товары",-1)),f(v(b),{to:"/catalog",class:"btn btn-soft"},{default:y(()=>[...a[4]||(a[4]=[C("Перейти в каталог",-1)])]),_:1})]),t("div",rt,[(o(!0),n(i,null,u(e.value.related,s=>(o(),U(j,{key:s.id,product:s},null,8,["product"]))),128))])])])])):p("",!0)}},vt=R(it,[["__scopeId","data-v-355606ee"]]);export{vt as default};
